<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes"
    />
    <title>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –¥–Ω–∏—â–∞–º</title>
    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&display=swap"
      rel="stylesheet"
    />
    <!-- –ù–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <div class="header-content">
          <div>
            <h1>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ ‚Äî –°–≤–∞—Ä–∫–∞ –¥–Ω–∏—â</h1>
            <p class="subtitle">
              –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–≤–∞—Ä–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç
            </p>
          </div>
          <button id="help-btn" class="help-button">‚ùì –°–ø—Ä–∞–≤–∫–∞</button>
        </div>
        <div class="data-status" id="data-status">
          <span class="status-indicator"></span>
          <span class="status-text">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</span>
        </div>
      </header>

      <!-- –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏) -->
      <section class="card" id="filters-section">
        <h2>–§–∏–ª—å—Ç—Ä—ã</h2>
        <div id="filters-container" class="filters-grid"></div>
        <div class="button-group">
          <button id="apply-filters" class="primary">üîç –ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
          <button id="reset-filters">‚ü≤ –°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
      </section>

      <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (–∑–∞–ø–æ–ª–Ω—è—Ç—Å—è –∏–∑ JS) -->
      <section class="card" id="metrics-section">
        <div class="section-header">
          <h2>üìä –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (KPI)</h2>
          <button id="refresh-metrics" class="icon-btn" title="–û–±–Ω–æ–≤–∏—Ç—å">
            ‚ü≥
          </button>
        </div>
        <div class="metrics-legend">
          <div class="legend-item">
            <span class="indicator good"></span>
            <span>–í—ã—à–µ –Ω–æ—Ä–º—ã</span>
          </div>
          <div class="legend-item">
            <span class="indicator warning"></span>
            <span>–í –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã</span>
          </div>
          <div class="legend-item">
            <span class="indicator bad"></span>
            <span>–ù–∏–∂–µ –Ω–æ—Ä–º—ã</span>
          </div>
        </div>
        <div class="stats-cards" id="stats-cards"></div>
      </section>

      <!-- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —Å–≤–∞—Ä—â–∏–∫–∞–º -->
      <section class="card" id="welders-section">
        <div class="section-header">
          <h2>üë∑ –†–µ–π—Ç–∏–Ω–≥ —Å–≤–∞—Ä—â–∏–∫–æ–≤</h2>
          <span
            class="info-icon"
            title="–†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤—É"
            >‚ìò</span
          >
        </div>
        <div class="welders-ranking" id="welders-ranking"></div>
      </section>

      <!-- –ê–Ω–∞–ª–∏–∑ –±—Ä–∞–∫–∞ -->
      <section class="card" id="defect-analysis-section">
        <div class="section-header">
          <h2>‚ö†Ô∏è –ê–Ω–∞–ª–∏–∑ –±—Ä–∞–∫–∞</h2>
          <span class="info-icon" title="–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º –∏ —Å–≤–∞—Ä—â–∏–∫–∞–º"
            >‚ìò</span
          >
        </div>
        <div class="defect-summary" id="defect-summary"></div>
      </section>

      <!-- –ì—Ä–∞—Ñ–∏–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
      <section class="card">
        <div class="section-header">
          <h2>üìà –î–∏–Ω–∞–º–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</h2>
          <span
            class="info-icon"
            title="–°—É–º–º–∞—Ä–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–≤–∞—Ä–Ω—ã—Ö —à–≤–æ–≤ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º"
            >‚ìò</span
          >
        </div>
        <div class="chart-controls">
          <label
            >–ü–µ—Ä–∏–æ–¥:
            <select id="efficiency-group">
              <option value="day">–î–µ–Ω—å</option>
              <option value="month" selected>–ú–µ—Å—è—Ü</option>
              <option value="quarter">–ö–≤–∞—Ä—Ç–∞–ª</option>
              <option value="year">–ì–æ–¥</option>
            </select>
          </label>
          <button id="update-efficiency" class="primary">–û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
        <div class="chart-container">
          <canvas id="efficiency-chart"></canvas>
        </div>
        <div class="chart-legend">
          <p><strong>–§–æ—Ä–º—É–ª–∞:</strong> Œ£ (–î–ª–∏–Ω–∞ —Å–≤–∞—Ä–Ω—ã—Ö —à–≤–æ–≤) –∑–∞ –ø–µ—Ä–∏–æ–¥</p>
        </div>
      </section>

      <!-- –ì—Ä–∞—Ñ–∏–∫ –¥–ª–∏–Ω—ã —Å–≤–∞—Ä–Ω—ã—Ö —à–≤–æ–≤ –ø–æ —Å–≤–∞—Ä—â–∏–∫–∞–º (–ª–∏–Ω–µ–π–Ω—ã–π) -->
      <section class="card">
        <div class="section-header">
          <h2>üìè –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–≤–∞—Ä—â–∏–∫–æ–≤</h2>
          <span class="info-icon" title="–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–ª–∏–Ω—ã —à–≤–æ–≤ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º"
            >‚ìò</span
          >
        </div>
        <div class="chart-controls">
          <label
            >–ü–µ—Ä–∏–æ–¥:
            <select id="weld-period">
              <option value="month">–ü–æ –º–µ—Å—è—Ü–∞–º</option>
              <option value="quarter">–ü–æ –∫–≤–∞—Ä—Ç–∞–ª–∞–º</option>
            </select>
          </label>
          <button id="update-weld" class="primary">–û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
        <div class="chart-container">
          <canvas id="weld-chart"></canvas>
        </div>
      </section>

      <!-- –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –±—Ä–∞–∫–∞ -->
      <section class="card">
        <div class="section-header">
          <h2>ü•ß –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±—Ä–∞–∫–∞ –ø–æ —Å–≤–∞—Ä—â–∏–∫–∞–º</h2>
          <span class="info-icon" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –±—Ä–∞–∫–∞"
            >‚ìò</span
          >
        </div>
        <div class="defect-rule-config">
          <div class="rule-description">
            <strong>–ü—Ä–∞–≤–∏–ª–æ –±—Ä–∞–∫–∞:</strong> –∑–∞–ø–∏—Å—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –±—Ä–∞–∫–æ–≤–∞–Ω–Ω–æ–π, –µ—Å–ª–∏
            <select id="defect-field">
              <!-- –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </select>
            <select id="defect-operator">
              <option value="=">=</option>
              <option value="!=">‚â†</option>
              <option value=">">></option>
              <option value="<"><</option>
            </select>
            <input type="text" id="defect-value" value="0" />
          </div>
          <button id="apply-defect-rule" class="primary">
            –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ
          </button>
        </div>
        <div class="chart-container" style="height: 300px">
          <canvas id="defect-pie"></canvas>
        </div>
      </section>

      <!-- –¢—Ä–µ–Ω–¥—ã –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è -->
      <section class="card" id="trends-section">
        <div class="section-header">
          <h2>üìä –¢—Ä–µ–Ω–¥—ã –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</h2>
          <span class="info-icon" title="–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –ø–µ—Ä–∏–æ–¥–æ–º">‚ìò</span>
        </div>
        <div class="trends-container" id="trends-container"></div>
      </section>

      <!-- –¢–∞–±–ª–∏—Ü–∞ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö -->
      <section class="card">
        <div class="section-header">
          <h2>üìã –î–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
          <button id="export-data" class="secondary">üì• –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</button>
        </div>
        <p class="table-info">–ü–æ–∫–∞–∑–∞–Ω–æ –∑–∞–ø–∏—Å–µ–π: <span id="result-count">0</span></p>
        <div class="table-wrapper">
          <table id="result-table">
            <thead id="table-header"></thead>
            <tbody id="table-body"></tbody>
          </table>
        </div>
      </section>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–º–æ—â–∏ -->
    <div id="help-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>üìñ –°–ø—Ä–∞–≤–∫–∞ –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é</h3>
          <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
          <h4>–ú–µ—Ç—Ä–∏–∫–∏ –∏ —Ñ–æ—Ä–º—É–ª—ã</h4>
          <ul>
            <li><strong>–í—Å–µ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π:</strong> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–≤–∞—Ä–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥</li>
            <li><strong>–°—É–º–º–∞ —à–≤–æ–≤ (–º):</strong> Œ£ (–î–ª–∏–Ω–∞ —Å–≤–∞—Ä–Ω—ã—Ö —à–≤–æ–≤) –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</li>
            <li><strong>–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ (–º):</strong> Œ£ —à–≤–æ–≤ / –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π</li>
            <li><strong>–ë—Ä–∞–∫ (%):</strong> (–∑–∞–±—Ä–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –¥–Ω–∏—â–∞ / –≤—Å–µ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π) √ó 100</li>
          </ul>
          <h4>–î–∞–Ω–Ω—ã–µ –æ –±—Ä–∞–∫–µ</h4>
          <p>–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ª–∏—Å—Ç–∞ "–ë—Ä–∞–∫" Google –¢–∞–±–ª–∏—Ü—ã –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –±—Ä–∞–∫–∞. –°–≤—è–∑—å –¥–∞–Ω–Ω—ã—Ö –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ:</p>
          <ul>
            <li>–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞</li>
            <li>‚Ññ –î–Ω–∏—â–∞</li>
          </ul>
          <p>–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –æ –±—Ä–∞–∫–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –ø—Ä–∞–≤–∏–ª–æ.</p>
          <h4>–§–∏–ª—å—Ç—Ä—ã</h4>
          <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –ª—é–±—ã–º –ø–æ–ª—è–º. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É –∏ –∏—â–µ—Ç —á–∞—Å—Ç–∏—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è.</p>
          <h4>–ê–≤—Ç–æ-—à–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫</h4>
          <p>–¢–∞–±–ª–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —à–∏—Ä–∏–Ω—É –∫–æ–ª–æ–Ω–æ–∫ –ø–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.</p>
        </div>
      </div>
    </div>
    </div>

    <!-- –ù–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã (–ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω) -->
    <script src="utils/helpers.js"></script>
    <script src="parser.js"></script>
    <script src="utils/EfficiencyPlot.js"></script>
    <script src="utils/WeldLengthPlot.js"></script>
    <script src="utils/DefectPie.js"></script>
    <script src="app.js"></script>
  </body>
</html>
